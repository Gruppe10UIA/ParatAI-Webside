---
import { getCollection } from 'astro:content';
import ProfileCard from './ProfileCard.astro';

const profiles = await getCollection('profiles');
profiles.sort(
  (a, b) =>
    (a.data.order ?? 999) - (b.data.order ?? 999) ||
    a.data.name.localeCompare(b.data.name)
);
---

<section class="mx-auto max-w-6xl p-6">
  <header class="mb-6">
    <h2 class="text-2xl md:text-3xl font-bold">ParatAI-medlemmer</h2>
  </header>

  {profiles.length ? (
    <div
      class="grid gap-6 sm:gap-7
             grid-cols-1 sm:grid-cols-2 lg:grid-cols-3"
    >
      {profiles.map((entry) => <ProfileCard entry={entry} />)}
    </div>
  ) : (
    <p class="text-slate-600">No profiles yet.</p>
  )}
</section>
