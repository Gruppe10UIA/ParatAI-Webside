---
import { getCollection } from 'astro:content';
import ProfileCard from './ProfileCard.astro';
import '../styles/components/profiles-grid.css';

const profiles = await getCollection('profiles');
profiles.sort(
  (a, b) =>
    (a.data.order ?? 999) - (b.data.order ?? 999) ||
    a.data.name.localeCompare(b.data.name)
);
---

<section class="profiles-section">
  <header class="profiles-header">
    <h2 class="profiles-title">ParatAI-medlemmer</h2>
  </header>

  {profiles.length ? (
    <div class="profiles-grid">
      {profiles.map((entry) => <ProfileCard entry={entry} />)}
    </div>
  ) : (
    <p class="profiles-empty">No profiles yet.</p>
  )}
</section>
