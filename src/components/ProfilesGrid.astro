---
import { getCollection } from 'astro:content';
import ProfileCard from './ProfileCard.astro';

const profiles = await getCollection('profiles');
// Optional sort: by "order" then by name
profiles.sort((a, b) => (a.data.order ?? 999) - (b.data.order ?? 999) || a.data.name.localeCompare(b.data.name));
---

<section class="mx-auto max-w-6xl p-6">
  <header class="mb-4">
    <h2 class="text-2xl font-bold">People</h2>
    <p class="text-slate-600 text-sm">Profiles pulled from <code>src/content/profiles</code></p>
  </header>

  {profiles.length ? (
    <div class="grid gap-8 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4">
      {profiles.map((entry) => <ProfileCard entry={entry} />)}
    </div>
  ) : (
    <p class="text-slate-600">No profiles yet.</p>
  )}
</section>
