---
import type { CollectionEntry } from 'astro:content';
import '../styles/components/profile-card.css';
interface Props { entry: CollectionEntry<'profiles'> }
const { entry } = Astro.props;
const { data} = entry;
---
<a href={`/profiles/${slug}`} class="profile-card">
  <div class="profile-card__header">
    {data.avatar ? (
      <img
        src={data.avatar}
        alt={data.name}
        class="profile-card__avatar"
        loading="lazy"
      />
    ) : (
      <div class="profile-card__avatar-fallback">
        {data.name?.slice(0,1) ?? "?"}
      </div>
    )}
    <div class="profile-card__content">
      <h3 class="profile-card__name">{data.name}</h3>
      {data.title && <p class="profile-card__title">{data.title}</p>}
      {data.location && <p class="profile-card__location">üìç {data.location}</p>}
    </div>
  </div>
  
  {data.tags?.length ? (
    <ul class="profile-card__tags">
      {data.tags.map((t) => <li class="profile-card__tag">{t}</li>)}
    </ul>
  ) : null}
  
  {(data.github || data.linkedin) && (
    <div class="profile-card__links">
      {data.github && (
        <button 
          class="profile-card__link"
          data-url={data.github}
          onclick="event.stopPropagation(); window.open(this.dataset.url, '_blank')"
        >
          GitHub
        </button>
      )}
      {data.linkedin && (
        <button 
          class="profile-card__link"
          data-url={data.linkedin}
          onclick="event.stopPropagation(); window.open(this.dataset.url, '_blank')"
        >
          LinkedIn
        </button>
      )}
    </div>
  )}
</a>
