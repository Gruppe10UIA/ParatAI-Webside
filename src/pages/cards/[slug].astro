---
// src/pages/cards/[slug].astro
import { getEntry, getCollection } from 'astro:content';
import type { CollectionEntry } from 'astro:content';
import CardsLAyout from '../../layouts/CardsLayout.astro';

// (Recommended) Pre-build all profile pages
export async function getStaticPaths() {
  const cards = await getCollection('cards');
  return cards.map((entry) => ({
    params: { slug: entry.slug },
    props: { entry },
  }));
}

const entry = await getEntry('cards', Astro.params.slug!);

if (!entry) {
  throw new Error(`Profile not found: ${Astro.params.slug}`);
}

const { Content } = await entry.render();
const { data } = entry;
---

<CardsLAyout data={data}>
  <Content />
</CardsLAyout>
